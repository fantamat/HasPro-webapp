<!DOCTYPE html>
{% load static %}
{% load i18n %}
{% load global_tags %}
{% load cookie_consent_tags %}
<html>
  <head>
    <meta charset="utf-8">
    <title>IsHas</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <link rel="stylesheet" href="{% static 'css/haspro.css' %}">

    <link rel="icon" href="{% static 'ishas.ico' %}" type="image/x-icon">
    
    <script src="https://unpkg.com/htmx.org@2.0.4"></script>

    {% if request|cookie_group_accepted:"analytics" %}
    <script async src="https://www.googletagmanager.com/gtag/js?id={% get_analytics_id %}"></script>
    <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', '{% get_analytics_id %}');
    </script>
    {% endif %}
  </head>
  <body>
    {% include 'cookie_consent/banner.html' %}

    <nav>
      <a href="/">{% trans "Home" %}</a>
    {% if user.is_authenticated %}
      <a href="{% url 'haspro_app:buildingowner-list' %}">{% trans "Owners" %}</a>
      <a href="{% url 'haspro_app:building-list' %}">{% trans "Buildings" %}</a>
      <a href="{% url 'haspro_app:firedistinguisher-list' %}">{% trans "Fire Extinguishers" %}</a>
      <a href="{% url 'haspro_app:tools-view' %}">{% trans "Tools" %}</a>

      <div class="nav-right">
        <!-- Language Switcher -->
        <form action="{% url 'set_language' %}" method="post" style="display: inline; background: unset;">
        {% csrf_token %}
        <input name="next" type="hidden" value="{{ redirect_to }}" />
        <select name="language" onchange="this.form.submit()">
            {% get_current_language as LANGUAGE_CODE %}
            {% get_available_languages as LANGUAGES %}
            {% get_language_info_list for LANGUAGES as languages %}
            {% for language in languages %}
                <option value="{{ language.code }}"{% if language.code == LANGUAGE_CODE %} selected{% endif %}>
                    {{ language.name_local }}
                </option>
            {% endfor %}
        </select>
        </form>
        
        <a href="{% url 'account_logout' %}">{% trans "Logout" %}</a>
        {% else %}
        <a href="{% url 'account_login' %}">{% trans "Login" %}</a>
        {% endif %}
      </div>
    </nav>

    <div class="messages" id="messages-container">
    {% if messages %}
        {% include "messages.html" with show_close_btn=True %}
    {% endif %}     
    </div>



    <div class="container">
      {% block content %}
      {% endblock %}
    </div>

    <footer>
      <p>&copy; 2025 {% trans "IsHas app" %}</p>
    </footer>
    

    <script src="{% static "js/haspro.js" %}"></script>
  </body>
</html>